"use strict";!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery"),require("handlebars")):"function"==typeof define&&define.amd?define(["jquery","handlebars"],e):e(t.jQuery,t.window)}(window,function(d,h){(d=d&&d.hasOwnProperty("default")?d.default:d).fn.checklist=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if("string"==typeof e[0]){var l=u[e[0]];if("function"==typeof l)return l.apply(this,Array.prototype.slice.call(e,1));console.error(e[0]+" is not a function.")}else i.apply(this,e)},d.checklist={defaultTemplate:'<div class="ckl-container">\n\t{{#if opts.actionsBox}}\n\t<div ckl-actions>\n\t\t{{#if multiple}}\n\t\t<button type="button" ckl-select-all class="btn btn-default" {{#if disabled}}disabled{{/if}}>{{opts.selectAllText}}</button>\n\t\t{{/if}}\n\t\t<button type="button" ckl-deselect-all class="btn btn-default" {{#if disabled}}disabled{{/if}}>{{#if multiple}}{{opts.deselectAllText}}{{else}}{{opts.deselectText}}{{/if}}</button>\n\t</div>\n\t{{/if}}\n\t<ul>\n\t\t{{#each items}}\n\t\t<li ckl-item>\n\t\t\t<input ckl-input value="{{value}}" name="{{../inputName}}" type="{{../inputType}}" {{#if ../disabled}}disabled{{/if}}/>\n\t\t\t{{text}}\n\t\t</li>\n\t\t{{/each}}\n\t</ul>\n\t</div>'};var o=0,i=function(r){this.each(function(t,e){var n=d.extend({template:d.checklist.defaultTemplate,selectAllText:"Select All",deselectAllText:"Deselect All",deselectText:"Deselect"},r),l=d(e),i=l.prop("multiple"),c=l.attr("name")||"_ckl_"+o;l.removeAttr("name").hide(),o++;var a={opts:n,multiple:i,inputType:i?"checkbox":"radio",inputName:c,disabled:l.prop("disabled")};e._ckl_ctx=a,u.refresh.call(l)})},u={selectAll:function(){return this.each(function(t,e){e._ckl_ctx&&e._ckl_ctx.$ele.find("input:radio,input:checkbox").prop("checked",!0)}),this},deselectAll:function(){return this.each(function(t,e){e._ckl_ctx&&e._ckl_ctx.$ele.find("input:radio,input:checkbox").prop("checked",!1)}),this},disable:function(){return this.each(function(t,e){e._ckl_ctx&&e._ckl_ctx.$ele.find("input:radio,input:checkbox").prop("disabled",!0)}),this},enable:function(){return this.each(function(t,e){e._ckl_ctx&&e._ckl_ctx.$ele.find("input:radio,input:checkbox").prop("disabled",!1)}),this},getValue:function(){var t=this[0];if(t)return t._ckl_ctx?t._ckl_ctx.$ele.inputVal()[t._ckl_ctx.inputName]:this.val()},setValue:function(l){return this.each(function(t,e){if(e._ckl_ctx){var n={};n[e._ckl_ctx.inputName]=l,e._ckl_ctx.$ele.inputVal(n)}}),this},refresh:function(){return Promise.all(this.map(function(t,e){var u=d(e),s=e._ckl_ctx;if(!s)return Promise.resolve();var f=n(e),p=s.opts;return s.$ele&&(s.$ele.remove(),s.$ele=void 0),(p.hasOwnProperty("ajax")?"function"==typeof p.ajax?p.ajax():new Promise(function(t,e){d.ajax(p.ajax).done(t).fail(e)}):Promise.resolve(u.find("option").map(function(t,e){var n=d(e);return{value:n.attr("value"),text:n.text()}}).toArray())).then(function(t){t||(t=[]);var e=!0,n=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(e=(i=c.next()).done);e=!0){var a=i.value;a._chklst_selected=-1<f.indexOf(""+a.value)}}catch(t){n=!0,l=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw l}}s.items=t;var r=h.Handlebars.compile(p.template)(s),o=d(r);u.after(o),(s.$ele=o).find("[ckl-select-all]").click(function(){o.find("input:radio,input:checkbox").prop("checked",!0)}),o.find("[ckl-deselect-all]").click(function(){o.find("input:radio,input:checkbox").prop("checked",!1)})})}))}},n=function(t){var e=u.getValue.call(d(t));return d(t).prop("multiple")||(e=null==e?[]:[e]),e}});
